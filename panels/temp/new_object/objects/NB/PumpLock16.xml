V 14
1
LANG:10027 0 
PANEL,-1 -1 280 158 N "_3DFace" 2
"$Ldp"
"$dp"
"main(){
  btn_fp.backCol(\"_Transparent\");

  txt_name.text(\"Насос \" + dpGetDescription(dp + \".sts_bit\"));
  dpConnect(\"cbStatus\", dp + \".sts_bit\");
}


" 0
 E E E E 1 -1 -1 0  58 42.95238095238094
""0  1
E "
enum Directions{
  Up = 0,
  Right = 1,
  Down = 2,
  Left = 3
};

public Directions Direct = Directions::Right;

#property Directions Direct
public Directions getDirect(){
  return Direct;
}
public void setDirect(Directions v){
  Direct = v;
  initArrow();
}

#property bool but
public void setBut(bool b){
  btn_fp.visible(b);
}
public void getBut(){
  return btn_fp.visible;
}

#property bool fp_win
public bool getFp_win(){ return btn_fp.visible; }
public void setFp_win(bool a){
  if(a){
    poll = a;
  }
    btn_fp.visible(a);
  }

/*
const string DP = $dp;

void cbStatus(string dp, bit32 val){
  if(getBit(val, 28)){
    el_sts.backCol(\"<green,4,White,4>\");
  }else if(getBit(val,29)){
    el_sts.backCol(\"<yellow,4,White,4>\");
  }else if(getBit(val, 26)){
    el_sts.backCol(\"green\");
  }else if(getBit(val, 27)){
    el_sts.backCol(\"grey\");
  }else{
    el_sts.backCol(\"WF_Border\");
  }

  lbl_imit.visible(getBit(val, 16));
  txt_maint.visible(getBit(val, 11));
  el_fault.visible = (getBit(val, 17) || getBit(val, 20) || getBit(val, 21));
}
*/

public void initArrow(){
  switch((int)Direct){
    case 0:
      setMultiValue(\"ar_up\", \"visible\", true,
                    \"ar_right\", \"visible\", false,
                    \"ar_down\", \"visible\", false,
                    \"ar_left\", \"visible\", false);
       break;
    case 1:
      setMultiValue(\"ar_up\", \"visible\", false,
                    \"ar_right\", \"visible\", true,
                    \"ar_down\", \"visible\", false,
                    \"ar_left\", \"visible\", false);
       break;
    case 2:
      setMultiValue(\"ar_up\", \"visible\", false,
                    \"ar_right\", \"visible\", false,
                    \"ar_down\", \"visible\", true,
                    \"ar_left\", \"visible\", false);
       break;
    case 3:
      setMultiValue(\"ar_up\", \"visible\", false,
                    \"ar_right\", \"visible\", false,
                    \"ar_down\", \"visible\", false,
                    \"ar_left\", \"visible\", true);
       break;
    default:
      setMultiValue(\"ar_up\", \"visible\", false,
                    \"ar_right\", \"visible\", false,
                    \"ar_down\", \"visible\", false,
                    \"ar_left\", \"visible\", false);
       break;
  }
}

const string dp = $dp;
const string Ldp = $Ldp;

void cbStatus(string dpe, bit32 val){
  if(getBit(val, 24)){
    el_sts.backCol(\"green\");
  }else if(getBit(val, 25)){
    el_sts.backCol(\"grey\");
  }else if(getBit(val, 26)){
    el_sts.backCol(\"RunLock\");
  }else if(getBit(val, 27)){
    el_sts.backCol(\"StopLock\");
  }else{
    el_sts.backCol(\"WF_Border\");
  }

}
" 0
 3
"CBRef" "1"
"EClose" E
"dpi" "96"
0 0 0
""
DISPLAY_LAYER, 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0
LAYER, 0 
1
LANG:10027 0 
7 1
"el_sts"
""
1 116 88 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
0 0 0 0 0 0
E E E
0
1
LANG:10027 0 

3
"layoutAlignment" "AlignNone"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E 1 0 1 -38 -10 1 E 116 88 29 29
13 10
"btn_fp"
""
1 44.19999999999999 66.88257292450987 E E E 1 E 1 E N "_Transparent" E N {0,255,0,86} E "// SimpleCtrlScriptStart {valid}
main(int iType)
{
  dyn_errClass err;

  int          i, iReturnValue = 1, iDpCount = 15;
  dyn_int      diType = makeDynInt();
  dyn_string   dsDps;

  dsDps[1] = $dp+\".status.out1\" + \":_alert_hdl.._ack\";
  dsDps[2] = $dp+\".status.out2\" + \":_alert_hdl.._ack\";
  dsDps[3] = $dp+\".status.out3\" + \":_alert_hdl.._ack\";
  dsDps[4] = $dp+\".status.out4\" + \":_alert_hdl.._ack\";
  dsDps[5] = $dp+\".status.out5\" + \":_alert_hdl.._ack\";
  dsDps[6] = $dp+\".status.out6\" + \":_alert_hdl.._ack\";
  dsDps[7] = $dp+\".status.out7\" + \":_alert_hdl.._ack\";
  dsDps[8] = $dp+\".status.out8\" + \":_alert_hdl.._ack\";
  dsDps[9] = $dp+\".status.out9\" + \":_alert_hdl.._ack\";
  dsDps[10] = $dp+\".status.out10\" + \":_alert_hdl.._ack\";
  dsDps[11] = $dp+\".status.out12\" + \":_alert_hdl.._ack\";
  dsDps[12] = $dp+\".status.out13\" + \":_alert_hdl.._ack\";
  dsDps[13] = $dp+\".status.out14\" + \":_alert_hdl.._ack\";
  dsDps[14] = $dp+\".status.out15\" + \":_alert_hdl.._ack\";
  dsDps[15] = $dp+\".status.out16\" + \":_alert_hdl.._ack\";

  if ( isFunctionDefined(\"isAckable\") )
  {
    isAckable( iType, dsDps, iReturnValue );
    if ( iReturnValue == 0 || dynlen (dsDps ) < 1 ) return;
  }

  for ( i = 1; i <= dynlen(dsDps); i++ )
    diType[i] = iType;

  dpSetWait( dsDps, diType );

  err = getLastError();
  if ( dynlen(err) > 0 )
    DebugN(err);
}
// SimpleCtrlScript {EP_confirm}
// dpCount {15}
// dp1 {$dp + \".status.out1\"}
// dp2 {$dp + \".status.out2\"}
// dp3 {$dp + \".status.out3\"}
// dp4 {$dp + \".status.out4\"}
// dp5 {$dp + \".status.out5\"}
// dp6 {$dp + \".status.out6\"}
// dp7 {$dp + \".status.out7\"}
// dp8 {$dp + \".status.out8\"}
// dp9 {$dp + \".status.out9\"}
// dp10 {$dp + \".status.out10\"}
// dp11 {$dp + \".status.out12\"}
// dp12 {$dp + \".status.out13\"}
// dp13 {$dp + \".status.out14\"}
// dp14 {$dp + \".status.out15\"}
// dp15 {$dp + \".status.out16\"}
// SimpleCtrlScriptEnd {EP_confirm}
" 0

 E E
9 0 0 0 0 0
E E E
1
1
LANG:10027 0 

1
"layoutAlignment" "AlignNone"
1
LANG:10027 35 MS Shell Dlg 2,-1,13,5,50,0,0,0,0,0
0  42.19999999999999 33 113.2 110.4685376086532

T 
1
LANG:10027 12 PUSH_BUTTON1
"main(mapping event){

  if (getUserPermission(4)){
     ChildPanelOnCentral(\"faceplates/NB/NA_LOCK16.xml\",
                         \"Блокировки \" + \"Npump\",
                         makeDynString(\"$dp:\" + dp, \"$Ldp:\" + Ldp));
  }
  else {
    DebugN(\"Недостаточно прав у пользователя\");
    ChildPanelOnCentral(\"faceplates/NoAccessRights.xml\", \"\", makeDynString(\"\"));
  }
}" 0
 E E E
2 13
"txt_name"
""
1 78 38 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
12 0 0 0 0 0
E E E
0
1
LANG:10027 0 

4
"layoutAlignment" "AlignNone"
"dashclr"N "_Transparent"
"antiAliased" "0"
"transformable" "0"
E E 0 1 3 2 1 E U  0 E 45 31 111 46
0 2 2 "0s" 0 0 0 201 0 0  78 38 1
1
LANG:10027 35 MS Shell Dlg 2,-1,13,5,50,0,0,0,0,0
0 1
LANG:10027 17 Насос Н-№
10 14
"ar_right"
""
1 280 100 E E E 1 E 1 E N {0,0,0} E N "WF_Border" E E
 E E
13 0 0 0 0 0
E E E
0
1
LANG:10027 0 

3
"layoutAlignment" "AlignNone"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E 4.151882264190041e-17 -0.1356107660455486 -0.1627329192546585 -4.982258717028055e-17 123.2732919254658 114.9710144927536 1 E 3 280 100
220 200
340 200
 1
10 15
"ar_down"
""
1 280 100 E E E 1 E 1 E N {0,0,0} E N "WF_Border" E E
 E E
14 0 0 0 0 0
E E E
0
1
LANG:10027 0 

3
"layoutAlignment" "AlignNone"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E 0.1356107660455486 0 -0.1627329192546585 40.0289855072464 123.2732919254658 1 E 3 280 100
220 200
340 200
 1
10 16
"ar_left"
""
1 280 100 E E E 1 E 1 E N {0,0,0} E N "WF_Border" E E
 E E
15 0 0 0 0 0
E E E
0
1
LANG:10027 0 

3
"layoutAlignment" "AlignNone"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E -4.151882264190041e-17 0.1356107660455486 0.1627329192546585 4.982258717028055e-17 32.72670807453416 40.02898550724639 1 E 3 280 100
220 200
340 200
 1
10 17
"ar_up"
""
1 280 100 E E E 1 E 1 E N {0,0,0} E N "WF_Border" E E
 E E
16 0 0 0 0 0
E E E
0
1
LANG:10027 0 

3
"layoutAlignment" "AlignNone"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E -0.1356107660455486 0 0.1627329192546585 115.9710144927536 32.72670807453415 1 E 3 280 100
220 200
340 200
 1
0
LAYER, 1 
1
LANG:10027 0 
0
LAYER, 2 
1
LANG:10027 0 
0
LAYER, 3 
1
LANG:10027 0 
0
LAYER, 4 
1
LANG:10027 0 
0
LAYER, 5 
1
LANG:10027 0 
0
LAYER, 6 
1
LANG:10027 0 
0
LAYER, 7 
1
LANG:10027 0 
0
0
